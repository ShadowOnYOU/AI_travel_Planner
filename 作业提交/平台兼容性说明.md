# âš ï¸ å¹³å°å…¼å®¹æ€§è¯´æ˜

## ğŸ—ï¸ Docker é•œåƒå¹³å°æ”¯æŒ

å½“å‰ Docker é•œåƒæ˜¯åŸºäº `linux/amd64` å¹³å°æ„å»ºçš„ï¼Œä¸»è¦æ”¯æŒï¼š

### âœ… æ”¯æŒçš„å¹³å°
- **Intel/AMD x86_64 å¤„ç†å™¨**çš„ Linux ç³»ç»Ÿ
- **Intel å¤„ç†å™¨**çš„ Windows ç³»ç»Ÿï¼ˆé€šè¿‡ WSL2ï¼‰  
- **Intel å¤„ç†å™¨**çš„ macOS ç³»ç»Ÿ

### âš ï¸ å¯èƒ½éœ€è¦é¢å¤–é…ç½®çš„å¹³å°
- **Apple Silicon (M1/M2)** çš„ macOS ç³»ç»Ÿ
- **ARM64** æ¶æ„çš„ Linux ç³»ç»Ÿ

## ğŸ› ï¸ Apple Silicon (M1/M2) Mac è§£å†³æ–¹æ¡ˆ

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Apple Silicon Macï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

### æ–¹æ³•ä¸€ï¼šå¼ºåˆ¶ä½¿ç”¨ x86_64 å¹³å°ï¼ˆæ¨èï¼‰

#### æ‹‰å–é•œåƒ
```bash
docker pull --platform linux/amd64 crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest
```

#### è¿è¡Œå®¹å™¨
```

```bash
# å¼ºåˆ¶æ‹‰å– x86_64 ç‰ˆæœ¬é•œåƒ
docker pull --platform linux/amd64 crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest

# è¿è¡Œå®¹å™¨ï¼ˆä¼šé€šè¿‡ Rosetta 2 è½¬æ¢ï¼‰
docker run -d \
  --name ai-travel-planner \
  -p 3000:3000 \
  --platform linux/amd64 \
  crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest
```

### æ–¹æ³•äºŒï¼šæœ¬åœ°æ„å»º ARM64 ç‰ˆæœ¬

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/ShadowOnYOU/AI_travel_Planner.git
cd AI_travel_Planner

# 2. æœ¬åœ°æ„å»ºé€‚åˆ ARM64 çš„é•œåƒ
docker build --platform linux/arm64 -t ai-travel-planner:arm64 .

# 3. è¿è¡Œæœ¬åœ°æ„å»ºçš„é•œåƒ
docker run -d \
  --name ai-travel-planner \
  -p 3000:3000 \
  ai-travel-planner:arm64
```

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Docker Desktop çš„ Rosetta 2

1. åœ¨ Docker Desktop è®¾ç½®ä¸­å¯ç”¨ "Use Rosetta for x86/amd64 emulation on Apple Silicon"
2. é‡å¯ Docker Desktop
3. æ­£å¸¸è¿è¡Œé•œåƒï¼ˆä¼šè‡ªåŠ¨è½¬æ¢ï¼‰

## ğŸ§ Linux ARM64 ç³»ç»Ÿè§£å†³æ–¹æ¡ˆ

å¯¹äº ARM64 æ¶æ„çš„ Linux ç³»ç»Ÿï¼š

```bash
# æœ¬åœ°æ„å»º ARM64 ç‰ˆæœ¬
git clone https://github.com/ShadowOnYOU/AI_travel_Planner.git
cd AI_travel_Planner
docker build --platform linux/arm64 -t ai-travel-planner:arm64 .
docker run -d --name ai-travel-planner -p 3000:3000 ai-travel-planner:arm64
```

## ğŸªŸ Windows ç³»ç»Ÿè¯´æ˜

Windows ç”¨æˆ·éœ€è¦ï¼š
1. å®‰è£… Docker Desktop for Windows
2. å¯ç”¨ WSL2 åç«¯
3. ç¡®ä¿ä½¿ç”¨ Linux å®¹å™¨æ¨¡å¼

```cmd
# Windows å‘½ä»¤æç¤ºç¬¦æˆ– PowerShell
docker run -d --name ai-travel-planner -p 3000:3000 crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest
```

## ğŸ” æ£€æŸ¥ç³»ç»Ÿæ¶æ„

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ‚¨çš„ç³»ç»Ÿæ¶æ„ï¼š

```bash
# æ£€æŸ¥ Docker ç³»ç»Ÿä¿¡æ¯
docker version

# æ£€æŸ¥ç³»ç»Ÿæ¶æ„
uname -m

# æ£€æŸ¥ Docker æ”¯æŒçš„å¹³å°
docker buildx ls
```

å¸¸è§è¾“å‡ºï¼š
- `x86_64` æˆ– `amd64`: Intel/AMD 64ä½å¤„ç†å™¨
- `arm64` æˆ– `aarch64`: ARM 64ä½å¤„ç†å™¨ï¼ˆåŒ…æ‹¬ Apple Siliconï¼‰
- `armv7l`: ARM 32ä½å¤„ç†å™¨

## ğŸš€ é€šç”¨è¿è¡Œæ–¹æ¡ˆ

### æ™ºèƒ½æ£€æµ‹è„šæœ¬

åˆ›å»ºä¸€ä¸ªèƒ½è‡ªåŠ¨æ£€æµ‹æ¶æ„çš„è¿è¡Œè„šæœ¬ï¼š

```bash
#!/bin/bash

# æ£€æµ‹ç³»ç»Ÿæ¶æ„
ARCH=$(uname -m)
echo "æ£€æµ‹åˆ°ç³»ç»Ÿæ¶æ„: $ARCH"

if [[ "$ARCH" == "arm64" ]] || [[ "$ARCH" == "aarch64" ]]; then
    echo "æ£€æµ‹åˆ° ARM64 æ¶æ„ï¼Œå°†ä½¿ç”¨å¹³å°å…¼å®¹æ¨¡å¼..."
    docker run -d \
      --name ai-travel-planner \
      -p 3000:3000 \
      --platform linux/amd64 \
      crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest
else
    echo "æ£€æµ‹åˆ° x86_64 æ¶æ„ï¼Œç›´æ¥è¿è¡Œé•œåƒ..."
    docker run -d \
      --name ai-travel-planner \
      -p 3000:3000 \
      crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest
fi

echo "å¯åŠ¨å®Œæˆï¼è®¿é—® http://localhost:3000"
```

## ğŸ“‹ æ•…éšœæ’æŸ¥

### å¸¸è§é”™è¯¯

1. **"no matching manifest for linux/arm64/v8"**
   - åŸå› ï¼šé•œåƒä¸æ”¯æŒå½“å‰æ¶æ„
   - è§£å†³ï¼šä½¿ç”¨ `--platform linux/amd64` å‚æ•°

2. **å®¹å™¨è¿è¡Œç¼“æ…¢**
   - åŸå› ï¼šæ¶æ„è½¬æ¢å¼€é”€
   - è§£å†³ï¼šæœ¬åœ°æ„å»ºå¯¹åº”æ¶æ„çš„é•œåƒ

3. **æ‹‰å–å¤±è´¥**
   - åŸå› ï¼šç½‘ç»œé—®é¢˜æˆ–é•œåƒä»“åº“è®¿é—®é™åˆ¶
   - è§£å†³ï¼šä½¿ç”¨æœ¬åœ°æ„å»ºæ–¹å¼

### æ€§èƒ½å¯¹æ¯”

| å¹³å°ç»„åˆ | æ€§èƒ½è¡¨ç° | æ¨èç¨‹åº¦ |
|---------|---------|---------|
| x86_64 â†’ x86_64 é•œåƒ | 100% | â­â­â­â­â­ |
| ARM64 â†’ ARM64 é•œåƒ | 100% | â­â­â­â­â­ |
| ARM64 â†’ x86_64 é•œåƒ | 70-80% | â­â­â­ |

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

1. **å¯¹äº x86_64 ç³»ç»Ÿ**: ç›´æ¥ä½¿ç”¨æä¾›çš„é•œåƒ
2. **å¯¹äº ARM64 ç³»ç»Ÿ**: ä¼˜å…ˆå°è¯• `--platform` å‚æ•°ï¼Œå¦‚æ€§èƒ½ä¸è¶³åˆ™æœ¬åœ°æ„å»º
3. **å¯¹äºç”Ÿäº§ç¯å¢ƒ**: å»ºè®®æ„å»ºå¯¹åº”æ¶æ„çš„é•œåƒä»¥è·å¾—æœ€ä½³æ€§èƒ½

---

**ğŸ¯ å¿«é€Ÿæµ‹è¯•å‘½ä»¤ï¼ˆè‡ªåŠ¨é€‚é…æ¶æ„ï¼‰**:
```bash
docker run --rm --platform linux/amd64 -p 3000:3000 crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest
```