# 👨‍🏫 助教测试指南

## 🚀 快速开始

### 一键启动命令
```bash
docker run --rm -p 3000:3000 --platform linux/amd64 crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest
```

### 测试账户
```
📧 用户名: 335933870@qq.com
🔐 密码: 123321
```

## 🧪 功能测试路径

### ⚠️ 必须首先进行：API密钥配置验证

**重要**：在进行任何功能测试之前，必须先配置和验证API密钥，否则核心功能无法正常工作。

#### Step 0: API密钥配置（必须第一步完成）
1. **访问配置页面**：http://localhost:3000/config
2. **配置高德地图API**：
   - 点击"高德地图"标签页
   - 输入API Key：`1e967f9e5d863f52e8e76a8b7c381669`
   - 点击"🧪 测试连接"验证
   - 确保显示"✅ 连接成功"

3. **配置阿里云百炼AI**：
   - 点击"阿里云百炼"标签页
   - 输入以下信息：
     ```
     API Key: sk-7b2ff1814ecb499d89d56e86af030b19
     Base URL: https://dashscope.aliyuncs.com/compatible-mode/v1
     Model ID: qwen-plus
     ```
   - 点击"🧪 测试连接"验证
   - 确保显示"✅ 连接成功"

4. **保存配置**：
   - 点击"💾 保存配置"按钮
   - 确认配置已保存

**预期结果**：所有API连接状态显示为绿色"✅ 已连接"

**⚠️ 如果跳过此步骤**：
- AI行程规划功能将无法工作
- 地图显示可能异常
- 系统会显示API配置错误

### 1. 基础功能验证（必测）

#### Step 1: 用户系统测试
- 访问：http://localhost:3000/auth/signin
- 使用测试账户登录
- **预期结果**：成功登录并跳转到主页

#### Step 2: AI 行程规划测试  
- 访问：http://localhost:3000/plan
- 填写行程信息：
  ```
  目的地：北京
  出发日期：选择任意日期
  天数：3天
  预算：3000元
  出行人数：2人
  旅行风格：休闲观光
  ```
- 点击"生成行程"
- **预期结果**：AI 生成详细的3天北京行程

#### Step 3: 保存功能测试（重点）
- 在生成的行程详情页面查看**醒目的黄色提示横幅**
- 点击"💾 保存到我的行程"按钮
- 观察保存状态变化和成功通知
- **预期结果**：
  - 按钮显示保存中状态
  - 出现绿色成功通知
  - 询问是否跳转到行程列表

#### Step 4: 行程管理测试
- 访问：http://localhost:3000/itinerary
- 查看已保存的行程列表
- **预期结果**：看到刚才保存的北京行程

#### Step 5: 地图可视化测试
- 在行程详情页面点击"🗺️ 查看地图"
- **预期结果**：显示带有景点标记和路线的地图

### 2. 高级功能验证（可选）

#### 语音输入测试
- 在规划页面点击麦克风图标
- 说出旅行需求
- **预期结果**：语音转换为文字填入表单

#### 配置页面测试
- 访问：http://localhost:3000/config
- 测试各 API 连接状态
- **预期结果**：显示连接状态和测试结果

## ⚠️ 重要注意事项

### Supabase 数据库密钥过期

**现象**：如果遇到以下情况，说明 Supabase 密钥已过期
- 用户登录/注册失败
- 行程保存功能异常
- 控制台出现数据库连接错误
- 碰到这种情况请和我联系一下～（QQ:335933870），我可以更新一下key之后重新上传一下

### 测试重点

#### ✅ 必须正常的功能
1. **AI 行程生成**：核心 AI 功能
2. **地图可视化**：景点和路线展示
3. **用户界面**：响应式设计和交互
4. **保存提示**：新增的用户体验改进

#### ⚠️ 可能受影响的功能（不影响评分）
1. **用户注册**：如 Supabase 过期
2. **数据持久化**：如 Supabase 过期
3. **跨设备同步**：依赖数据库功能

## 🚨 故障处理

### 容器启动失败
```bash
# 检查 Docker 状态
docker --version

# 查看详细日志
docker logs [容器名]

# 重新拉取镜像
docker pull crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest
```

### 端口占用
```bash
# 使用其他端口
docker run --rm -p 8080:3000 --platform linux/amd64 [镜像地址]
# 然后访问 http://localhost:8080
```

### 平台兼容性
```bash
# Apple Silicon Mac 用户
docker run --rm -p 3000:3000 --platform linux/amd64 [镜像地址]
```

## 📞 联系方式

- **开发者**：ShadowOnYOU
- **GitHub**：https://github.com/ShadowOnYOU/AI_travel_Planner  
- **项目文档**：完整的 README 和作业提交文档
- **技术支持**：GitHub Issues

---

**🎯 快速验证命令**（推荐复制粘贴）:
```bash
docker run --rm -p 3000:3000 --platform linux/amd64 crpi-ttmopfgqdmld0jn5.cn-hangzhou.personal.cr.aliyuncs.com/ai_by_sgh/ai-travel-planner:latest && echo "访问 http://localhost:3000/auth/signin 使用账户 335933870@qq.com / 123321"
```